[gd_scene load_steps=54 format=3 uid="uid://q0p8j4vc433c"]

[ext_resource type="Script" path="res://scripts/Game.gd" id="1_mfq8h"]
[ext_resource type="PackedScene" uid="uid://dh3ocl34lg3dh" path="res://scenes/world/player.tscn" id="2_ii6h3"]
[ext_resource type="Shader" path="res://shaders/Game.gdshader" id="2_wbnov"]
[ext_resource type="PackedScene" uid="uid://dsaa4vfsxdl37" path="res://scenes/world/money.tscn" id="4_4nwhm"]
[ext_resource type="Texture2D" uid="uid://ca0ajj84jrdnj" path="res://assets/ui/MainPanel01.png" id="5_88b5c"]
[ext_resource type="Texture2D" uid="uid://s8cesa782cov" path="res://assets/ui/BarV1_Bar.png" id="5_r6pbo"]
[ext_resource type="Texture2D" uid="uid://b7qchr3teljb" path="res://assets/ui/BarV1_ProgressBarBorder.png" id="6_7wo5u"]
[ext_resource type="Script" path="res://scripts/ui/dialog.gd" id="6_51ty7"]
[ext_resource type="Texture2D" uid="uid://bxjv3un7voxki" path="res://assets/ui/BarV5_ProgressBar.png" id="7_4roe0"]
[ext_resource type="MeshLibrary" uid="uid://cdxueohwd3sef" path="res://assets/meshes/cityassets.tres" id="7_m58bh"]
[ext_resource type="FontFile" uid="uid://1yuy1o07mph2" path="res://assets/fonts/URW Grotesk SC Regular.ttf" id="7_rt3cn"]
[ext_resource type="Texture2D" uid="uid://vvpwiwrv1fvx" path="res://assets/ui/buttons/Button Normal.png" id="8_jd6hj"]
[ext_resource type="Texture2D" uid="uid://sybbdnjxw4uu" path="res://assets/ui/BarV8_ProgressBar.png" id="8_kenfo"]
[ext_resource type="FontFile" uid="uid://c7av1j5mjwa37" path="res://assets/fonts/URW Grotesk SC Light.ttf" id="9_k4d8i"]
[ext_resource type="Texture2D" uid="uid://c64pmfjh8j7ec" path="res://assets/ui/buttons/Button Disable.png" id="9_lmfon"]
[ext_resource type="Texture2D" uid="uid://bemv46m73p0r6" path="res://assets/ui/buttons/Button Hover.png" id="10_0vpjl"]
[ext_resource type="Texture2D" uid="uid://cybccdt0vrsml" path="res://assets/ui/Window04.png" id="10_lhwfo"]
[ext_resource type="Script" path="res://scripts/ui/typewriter.gd" id="11_tqxcn"]
[ext_resource type="Texture2D" uid="uid://bxgddnm1x0qb5" path="res://assets/ui/Circle01.png" id="11_tui2e"]
[ext_resource type="Texture2D" uid="uid://dqlvtvh47kej" path="res://assets/ui/fil.png" id="12_fvktn"]
[ext_resource type="Texture2D" uid="uid://dwexwgfewv1os" path="res://assets/ui/filBlu.png" id="12_hlfpu"]
[ext_resource type="Texture2D" uid="uid://dm8o2l7wjmdco" path="res://assets/ui/Cell125x121px.png" id="16_fe47w"]
[ext_resource type="Texture2D" uid="uid://cjrspwvrdbbe8" path="res://assets/ui/sidebar/Icon28.png" id="17_mlpqy"]
[ext_resource type="Texture2D" uid="uid://dwqupm0trkf5f" path="res://assets/ui/sidebar/Icon33.png" id="18_l250t"]
[ext_resource type="Texture2D" uid="uid://blsci5klgfdp7" path="res://assets/ui/sidebar/Icon36.png" id="19_1mubg"]
[ext_resource type="Texture2D" uid="uid://bkb5lasskcliv" path="res://assets/ui/sidebar/Icon37.png" id="20_2288c"]
[ext_resource type="Texture2D" uid="uid://ba78e5nelx6m6" path="res://assets/ui/Panel1_NoOpacity592x975px.png" id="21_2btk6"]
[ext_resource type="Script" path="res://scripts/ui/drone_camera.gd" id="26_bb6pl"]
[ext_resource type="Texture2D" uid="uid://c6rk8ro2e6oeb" path="res://assets/ui/windows/Card X3.png" id="26_n8b2v"]
[ext_resource type="PackedScene" uid="uid://b475wnptaipdd" path="res://scenes/pause_menu.tscn" id="28_4ig8x"]
[ext_resource type="PackedScene" uid="uid://bie0mx082taib" path="res://assets/enemies/doneTwo/military_drone.tscn" id="30_ufd37"]
[ext_resource type="PackedScene" uid="uid://banvpif1xm08v" path="res://assets/enemies/robotTwo/robot.tscn" id="31_1erxm"]
[ext_resource type="PackedScene" uid="uid://c5bvke8hqq3so" path="res://assets/enemies/oeia/oiiaioooooiai_fin.tscn" id="32_apht2"]
[ext_resource type="PackedScene" uid="uid://voahc4el36wc" path="res://assets/particles/vfx_fire.tscn" id="32_v08qx"]
[ext_resource type="PackedScene" uid="uid://n2ncjxjrjo5d" path="res://assets/friends/deliveryDrone/deliveryDrone.tscn" id="34_m6pxn"]
[ext_resource type="PackedScene" uid="uid://dq25whkugls8y" path="res://assets/enemies/doneSmall/small_drone.tscn" id="38_a5n5r"]
[ext_resource type="PackedScene" uid="uid://d0tjqnb20e8kq" path="res://assets/enemies/robot/robot_fella.tscn" id="38_aui5f"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_jnp1g"]
albedo_color = Color(0.201527, 0.201527, 0.201527, 1)

[sub_resource type="BoxMesh" id="BoxMesh_wu1uj"]
material = SubResource("StandardMaterial3D_jnp1g")

[sub_resource type="BoxShape3D" id="BoxShape3D_21piy"]
size = Vector3(1, 1.59082, 1.02148)

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_4vka5"]
texture = ExtResource("5_88b5c")

[sub_resource type="Theme" id="Theme_n6ngb"]
Panel/styles/panel = SubResource("StyleBoxTexture_4vka5")

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_t14s2"]

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_kx32d"]
texture = ExtResource("9_lmfon")

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_arse6"]
texture = ExtResource("10_0vpjl")

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_nyrar"]
texture = ExtResource("8_jd6hj")

[sub_resource type="Animation" id="Animation_bshj3"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Dialogue:visible_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_fs1qd"]
resource_name = "typewriter"
length = 2.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Dialogue:visible_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, 1.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_iedqb"]
_data = {
"RESET": SubResource("Animation_bshj3"),
"typewriter": SubResource("Animation_fs1qd")
}

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_0mm3f"]
texture = ExtResource("26_n8b2v")

[sub_resource type="Theme" id="Theme_v2ym0"]
Panel/styles/panel = SubResource("StyleBoxTexture_0mm3f")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_y1lgv"]
render_priority = 0
shader = ExtResource("2_wbnov")
shader_parameter/color_depth = 8
shader_parameter/dithering = true
shader_parameter/resolution_scale = 2

[sub_resource type="QuadMesh" id="QuadMesh_fraa3"]
flip_faces = true
size = Vector2(2, 2)

[node name="Spacial" type="Node3D"]
script = ExtResource("1_mfq8h")

[node name="vfx_Fire" parent="." instance=ExtResource("32_v08qx")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.75855, -0.93395, -1.384)

[node name="Floor" type="MeshInstance3D" parent="."]
transform = Transform3D(11.7921, 0, 0, 0, -0.851035, 0, 0, 0, 19.3013, 0, -1.06368, 0)
mesh = SubResource("BoxMesh_wu1uj")

[node name="StaticBody3D" type="StaticBody3D" parent="Floor"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Floor/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.29541, -0.0107422)
shape = SubResource("BoxShape3D_21piy")

[node name="Player" parent="." instance=ExtResource("2_ii6h3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.541)

[node name="UI" type="CanvasLayer" parent="Player"]

[node name="Dialog" type="Control" parent="Player/UI"]
visible = false
layout_mode = 3
anchor_right = 1.0
anchor_bottom = 0.83
offset_top = -6.0
offset_bottom = 0.159973
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 0
theme = SubResource("Theme_n6ngb")
script = ExtResource("6_51ty7")

[node name="Box" type="Panel" parent="Player/UI/Dialog"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.131
anchor_top = 0.086
anchor_right = 0.871
anchor_bottom = 1.055
offset_left = 0.0879822
offset_top = 0.216
offset_right = -0.39209
offset_bottom = 0.0799561
grow_horizontal = 2
grow_vertical = 2

[node name="okButton" type="Button" parent="Player/UI/Dialog/Box"]
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -198.0
offset_top = -97.0
offset_right = -84.0
offset_bottom = -59.0
grow_horizontal = 0
grow_vertical = 0
theme_override_fonts/font = ExtResource("7_rt3cn")
theme_override_font_sizes/font_size = 14
theme_override_styles/focus = SubResource("StyleBoxEmpty_t14s2")
theme_override_styles/disabled = SubResource("StyleBoxTexture_kx32d")
theme_override_styles/hover = SubResource("StyleBoxTexture_arse6")
theme_override_styles/normal = SubResource("StyleBoxTexture_nyrar")
text = "OK"

[node name="VBoxContainer" type="VBoxContainer" parent="Player/UI/Dialog"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.194
anchor_top = 0.167
anchor_right = 0.811
anchor_bottom = 0.875
offset_left = -0.488007
offset_top = 0.151993
offset_right = -0.272034
offset_bottom = -3.05176e-05

[node name="Title" type="Label" parent="Player/UI/Dialog/VBoxContainer"]
layout_mode = 2
theme_override_colors/font_shadow_color = Color(1, 1, 1, 0.101961)
theme_override_fonts/font = ExtResource("7_rt3cn")
theme_override_font_sizes/font_size = 24
text = "Hello this is a Title"
horizontal_alignment = 1

[node name="Dialogue" type="RichTextLabel" parent="Player/UI/Dialog/VBoxContainer"]
layout_mode = 2
theme_override_colors/font_outline_color = Color(1, 1, 1, 0.298039)
theme_override_fonts/normal_font = ExtResource("9_k4d8i")
theme_override_font_sizes/normal_font_size = 18
bbcode_enabled = true
text = "This is a text!"
fit_content = true
autowrap_mode = 1
visible_characters = 0
visible_ratio = 0.0

[node name="TypeWriterEffect" type="AnimationPlayer" parent="Player/UI/Dialog/VBoxContainer"]
libraries = {
"": SubResource("AnimationLibrary_iedqb")
}
script = ExtResource("11_tqxcn")

[node name="uiTest" type="Control" parent="Player/UI"]
visible = false
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Player_Heath" type="TextureProgressBar" parent="Player/UI/uiTest"]
visible = false
layout_mode = 0
offset_left = 6.0
offset_top = 17.0
offset_right = 278.0
offset_bottom = 57.0
value = 100.0
texture_under = ExtResource("5_r6pbo")
texture_over = ExtResource("6_7wo5u")
texture_progress = ExtResource("7_4roe0")
texture_progress_offset = Vector2(2, 2)

[node name="Player_Mana" type="TextureProgressBar" parent="Player/UI/uiTest"]
visible = false
layout_mode = 0
offset_left = 6.0
offset_top = 51.0
offset_right = 291.0
offset_bottom = 94.0
value = 100.0
texture_under = ExtResource("5_r6pbo")
texture_over = ExtResource("6_7wo5u")
texture_progress = ExtResource("8_kenfo")
texture_progress_offset = Vector2(2, 2)

[node name="TextEdit" type="TextEdit" parent="Player/UI/uiTest"]
layout_mode = 0
offset_left = 403.0
offset_top = 27.0
offset_right = 755.0
offset_bottom = 68.0
theme_override_fonts/font = ExtResource("9_k4d8i")
theme_override_font_sizes/font_size = 20
text = "TARGET: NEUTRALIZE THE ENEMY"

[node name="Panel1NoOpacity592x975Px2" type="Sprite2D" parent="Player/UI/uiTest"]
position = Vector2(933.792, 597.061)
scale = Vector2(0.74592, 0.106541)
texture = ExtResource("21_2btk6")

[node name="Panel1NoOpacity592x975Px" type="Sprite2D" parent="Player/UI/uiTest"]
position = Vector2(201.5, 598.5)
scale = Vector2(0.680743, 0.101538)
texture = ExtResource("21_2btk6")

[node name="Window04" type="Sprite2D" parent="Player/UI/uiTest"]
visible = false
position = Vector2(579.85, 603.147)
scale = Vector2(0.852166, 0.214465)
texture = ExtResource("10_lhwfo")

[node name="Cell125x121Px4" type="Sprite2D" parent="Player/UI/uiTest"]
position = Vector2(363, 607)
scale = Vector2(0.442, 0.442)
texture = ExtResource("16_fe47w")

[node name="Cell125x121Px3" type="Sprite2D" parent="Player/UI/uiTest"]
position = Vector2(297, 608)
scale = Vector2(0.442, 0.442)
texture = ExtResource("16_fe47w")

[node name="Cell125x121Px2" type="Sprite2D" parent="Player/UI/uiTest"]
position = Vector2(231, 609)
scale = Vector2(0.442, 0.442)
texture = ExtResource("16_fe47w")

[node name="Cell125x121Px" type="Sprite2D" parent="Player/UI/uiTest"]
position = Vector2(166, 610)
scale = Vector2(0.442149, 0.442149)
texture = ExtResource("16_fe47w")

[node name="Icon28" type="Sprite2D" parent="Player/UI/uiTest"]
position = Vector2(983.75, 593.75)
scale = Vector2(0.767045, 0.767045)
texture = ExtResource("17_mlpqy")

[node name="Icon33" type="Sprite2D" parent="Player/UI/uiTest"]
position = Vector2(912, 594)
scale = Vector2(0.815318, 0.815318)
texture = ExtResource("18_l250t")

[node name="Icon36" type="Sprite2D" parent="Player/UI/uiTest"]
position = Vector2(757, 595)
texture = ExtResource("19_1mubg")

[node name="Icon37" type="Sprite2D" parent="Player/UI/uiTest"]
position = Vector2(837, 595)
texture = ExtResource("20_2288c")

[node name="PlayerManaBar" type="TextureProgressBar" parent="Player/UI/uiTest"]
layout_mode = 0
offset_left = 1022.0
offset_top = 518.0
offset_right = 1152.0
offset_bottom = 648.0
value = 100.0
fill_mode = 3
texture_under = ExtResource("11_tui2e")
texture_progress = ExtResource("12_hlfpu")

[node name="Label" type="Label" parent="Player/UI/uiTest/PlayerManaBar"]
layout_mode = 0
offset_left = 22.0
offset_top = 42.0
offset_right = 111.0
offset_bottom = 83.0
theme_override_fonts/font = ExtResource("9_k4d8i")
theme_override_font_sizes/font_size = 40
text = "100%"

[node name="PlayerHealthBar" type="TextureProgressBar" parent="Player/UI/uiTest"]
layout_mode = 0
offset_top = 518.0
offset_right = 130.0
offset_bottom = 648.0
value = 100.0
fill_mode = 3
texture_under = ExtResource("11_tui2e")
texture_progress = ExtResource("12_fvktn")

[node name="Label" type="Label" parent="Player/UI/uiTest/PlayerHealthBar"]
layout_mode = 0
offset_left = 24.0
offset_top = 44.0
offset_right = 113.0
offset_bottom = 85.0
theme_override_fonts/font = ExtResource("9_k4d8i")
theme_override_font_sizes/font_size = 40
text = "100%"

[node name="deliveryDroneCam" type="Control" parent="Player/UI"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
theme = SubResource("Theme_v2ym0")
script = ExtResource("26_bb6pl")

[node name="Panel" type="Panel" parent="Player/UI/deliveryDroneCam"]
visible = false
layout_mode = 1
anchors_preset = -1
anchor_left = 18.8
anchor_top = 0.175
anchor_right = 28.725
anchor_bottom = 9.45
offset_left = 148.0
offset_top = -10.0
offset_right = -3.00012
offset_bottom = -147.0

[node name="droneCamera" type="TextureRect" parent="Player/UI/deliveryDroneCam"]
layout_mode = 1
anchors_preset = -1
anchor_left = 22.55
anchor_right = 28.8
anchor_bottom = 6.225
offset_left = -6.0
offset_bottom = -1.52588e-05
grow_horizontal = 2
grow_vertical = 2
stretch_mode = 4

[node name="SubViewport" type="SubViewport" parent="Player/UI/deliveryDroneCam/droneCamera"]
transparent_bg = true
size = Vector2i(300, 300)

[node name="Camera3D" type="Camera3D" parent="Player/UI/deliveryDroneCam/droneCamera/SubViewport"]
transform = Transform3D(0.726755, 0, 0.686897, 0, 1, 0, -0.686897, 0, 0.726755, 4.72343, 0.026615, 4.80754)
fov = 29.5

[node name="PauseMenu" parent="Player/UI" instance=ExtResource("28_4ig8x")]
visible = false
offset_right = -2.0
offset_bottom = -2.0

[node name="Shader" type="MeshInstance3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1.541)
material_overlay = SubResource("ShaderMaterial_y1lgv")
mesh = SubResource("QuadMesh_fraa3")
skeleton = NodePath("../..")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.000483983, -0.990043, 0.140762, 0.00340408, 0.140763, 0.990038, -0.999994, -1.34167e-09, 0.00343831, 6.41712, 2.71247, -0.457095)
shadow_enabled = true

[node name="GridMap" type="GridMap" parent="."]
mesh_library = ExtResource("7_m58bh")
cell_size = Vector3(1, 1, 1)
data = {
"cells": PackedInt32Array(-5, 65531, 1441843, -2, 65532, 1441881, -2, 65533, 1441881, -3, 65531, 1441837, -3, 65532, 1441836, -2, 2, 1441824, -2, 0, 655392, -65536, 0, 1048608, -65536, 2, 32, -65535, 0, 655379, -4, 65532, 1441804, -5, 65532, 1441804, -4, 1, 1441807, -65533, 1, 1441872, -65533, 2, 1441873, 3, 1, 1441878, 3, 2, 1441876, 65539, 1, 1441875, -65534, 1, 1441828, -65534, 2, 1441828, -65535, 1, 1441828, -65535, 2, 1441828, -65534, 3, 1441828, -65535, 3, 1441828, -65534, 4, 1441828, -65535, 4, 1441828, -4, 65533, 19, -5, 65529, 1441844, -5, 65527, 1441842)
}
metadata/_editor_floor_ = Vector3(0, -1, 0)

[node name="Money" parent="." instance=ExtResource("4_4nwhm")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 4.597, -0.159485, -1.88047)

[node name="MilitaryDrone" parent="." instance=ExtResource("30_ufd37")]
transform = Transform3D(0.2, 0, 0, 0, 0.2, 0, 0, 0, 0.2, -0.710361, -1.02455, -7.75038)

[node name="robot" parent="." instance=ExtResource("31_1erxm")]
transform = Transform3D(0.2, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 3.19277, -0.9548, -7.74821)

[node name="OiiaioooooiaiFin" parent="." instance=ExtResource("32_apht2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.31392, -0.960931, -7.88411)

[node name="Drone_animated" parent="." instance=ExtResource("34_m6pxn")]
transform = Transform3D(0.3, 0, 0, 0, 0.3, 0, 0, 0, 0.3, 3.703, -0.298579, 3.72027)

[node name="smallDrone" parent="." instance=ExtResource("38_a5n5r")]
transform = Transform3D(-0.974632, 0, 0.223811, 0, 1, 0, -0.223811, 0, -0.974632, 2.04316, -0.539734, -5.37112)

[node name="robotFella" parent="." instance=ExtResource("38_aui5f")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.09779, -0.638163, -3.16053)

[connection signal="pressed" from="Player/UI/Dialog/Box/okButton" to="Player/UI/Dialog" method="_on_ok_button_pressed"]
[connection signal="animation_finished" from="Player/UI/Dialog/VBoxContainer/TypeWriterEffect" to="Player/UI/Dialog" method="_on_type_writer_effect_animation_finished"]
